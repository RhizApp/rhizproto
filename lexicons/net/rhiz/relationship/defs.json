{
  "lexicon": 1,
  "id": "net.rhiz.relationship.defs",
  "defs": {
    "signatureData": {
      "type": "object",
      "description": "Cryptographic signature from a participant",
      "required": ["did", "signature"],
      "properties": {
        "did": {
          "type": "string",
          "format": "did"
        },
        "signature": {
          "type": "string",
          "description": "Base64-encoded signature"
        }
      }
    },
    "relationshipType": {
      "type": "string",
      "description": "Type of relationship",
      "knownValues": [
        "professional",
        "personal",
        "family",
        "social",
        "civic",
        "educational"
      ]
    },
    "visibility": {
      "type": "string",
      "description": "Visibility level for relationship data",
      "knownValues": ["public", "network", "private"]
    },
    "consentLevel": {
      "type": "string",
      "description": "Consent level for data usage",
      "knownValues": ["full", "limited", "anonymous"]
    },
    "verification": {
      "type": "object",
      "description": "Network verification and consensus data for a relationship",
      "required": ["consensusScore", "attestationCount", "lastUpdated"],
      "properties": {
        "consensusScore": {
          "type": "integer",
          "minimum": 0,
          "maximum": 100,
          "description": "Network consensus score based on attestations (0-100)"
        },
        "attestationCount": {
          "type": "integer",
          "minimum": 0,
          "description": "Total number of attestations received"
        },
        "verifyCount": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of verify attestations"
        },
        "disputeCount": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of dispute attestations"
        },
        "lastUpdated": {
          "type": "string",
          "format": "datetime",
          "description": "When verification was last updated"
        },
        "trend": {
          "type": "string",
          "enum": ["increasing", "stable", "decreasing"],
          "description": "Consensus trend over last 30 days"
        },
        "topAttesterReputation": {
          "type": "integer",
          "minimum": 0,
          "maximum": 100,
          "description": "Highest reputation among attesters (quality signal)"
        }
      }
    },
    "privacy": {
      "type": "object",
      "description": "Privacy settings for a relationship",
      "required": ["visibility", "consent"],
      "properties": {
        "visibility": {
          "type": "ref",
          "ref": "#visibility"
        },
        "consent": {
          "type": "ref",
          "ref": "#consentLevel"
        }
      }
    },
    "strengthHistoryPoint": {
      "type": "object",
      "description": "Historical strength data point",
      "required": ["timestamp", "strength"],
      "properties": {
        "timestamp": {
          "type": "string",
          "format": "datetime"
        },
        "strength": {
          "type": "integer",
          "minimum": 0,
          "maximum": 100,
          "description": "Strength score (0-100, scaled from 0.0-1.0)"
        },
        "event": {
          "type": "string",
          "maxLength": 500,
          "description": "Optional description of what changed"
        }
      }
    },
    "temporal": {
      "type": "object",
      "description": "Temporal data for a relationship",
      "required": ["start", "lastInteraction"],
      "properties": {
        "start": {
          "type": "string",
          "format": "datetime",
          "description": "When relationship started"
        },
        "lastInteraction": {
          "type": "string",
          "format": "datetime",
          "description": "Most recent interaction"
        },
        "history": {
          "type": "array",
          "items": {
            "type": "ref",
            "ref": "#strengthHistoryPoint"
          },
          "description": "Historical strength data points"
        }
      }
    }
  }
}

